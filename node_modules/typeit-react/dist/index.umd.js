var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(e,t,r)=>t in e?__defProp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,__spreadValues=(e,t)=>{for(var r in t||(t={}))__hasOwnProp.call(t,r)&&__defNormalProp(e,r,t[r]);if(__getOwnPropSymbols)for(var r of __getOwnPropSymbols(t))__propIsEnum.call(t,r)&&__defNormalProp(e,r,t[r]);return e},__spreadProps=(e,t)=>__defProps(e,__getOwnPropDescs(t)),__objRest=(e,t)=>{var r={};for(var n in e)__hasOwnProp.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&__getOwnPropSymbols)for(var n of __getOwnPropSymbols(e))t.indexOf(n)<0&&__propIsEnum.call(e,n)&&(r[n]=e[n]);return r};!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("react")):"function"==typeof define&&define.amd?define(["react"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).TypeIt=t(e.React)}(this,(function(e){"use strict";function t(e){if(e&&e.__esModule)return e;var t={__proto__:null,[Symbol.toStringTag]:"Module"};return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var r=t(e);const n=e=>Array.isArray(e),o=e=>n(e)?e:[e];const i=e=>Array.from(e),a=e=>document.createTextNode(e);let s=e=>([...e.childNodes].forEach((e=>{if(e.nodeValue)return[...e.nodeValue].forEach((t=>{e.parentNode.insertBefore(a(t),e)})),void e.remove();s(e)})),e);const l=e=>{let t=document.implementation.createHTMLDocument();return t.body.innerHTML=e,s(t.body)},u="ti-cursor",c={started:!1,completed:!1,frozen:!1,destroyed:!1},d={breakLines:!0,cursor:{autoPause:!0,autoPauseDelay:500,animation:{frames:[0,0,1].map((e=>({opacity:e}))),options:{iterations:1/0,easing:"steps(2, start)",fill:"forwards"}}},cursorChar:"|",cursorSpeed:1e3,deleteSpeed:null,html:!0,lifeLike:!0,loop:!1,loopDelay:750,nextStringDelay:750,speed:100,startDelay:250,startDelete:!1,strings:[],waitUntilVisible:!1,beforeString:()=>{},afterString:()=>{},beforeStep:()=>{},afterStep:()=>{},afterComplete:()=>{}};function f(e,t=!1,r=!1){let n,o=e.querySelector(".ti-cursor"),i=document.createTreeWalker(e,NodeFilter.SHOW_ALL,{acceptNode:e=>{var t,n;if(o&&r){if(null==(t=e.classList)?void 0:t.contains(u))return NodeFilter.FILTER_ACCEPT;if(o.contains(e))return NodeFilter.FILTER_REJECT}return(null==(n=e.classList)?void 0:n.contains(u))?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}),a=[];for(;n=i.nextNode();)n.originalParent||(n.originalParent=n.parentNode),a.push(n);return t?a.reverse():a}function p(e,t=!0){return t?f(l(e)):i(e).map(a)}const y=e=>document.createElement(e),h=(e,t="")=>{let r=y("style");r.id=t,r.appendChild(a(e)),document.head.appendChild(r)},m=e=>(n(e)||(e=[e/2,e/2]),e),g=(e,t)=>Math.abs(Math.random()*(e+t-(e-t))+(e-t));let b=e=>e/2;const _=e=>"value"in e;let v=e=>"function"==typeof e?e():e;const w=e=>Number.isInteger(e);let P=(e,t=document,r=!1)=>t["querySelector"+(r?"All":"")](e);const O=(e,t)=>Object.assign({},e,t);let T={"font-family":"","font-weight":"","font-size":"","font-style":"","line-height":"",color:"",transform:"translateX(-.125em)"};const S=(e,t)=>new Array(t).fill(e),E=({queueItems:e,selector:t,cursorPosition:r,to:n})=>{if(w(t))return-1*t;let o=new RegExp("END","i").test(n),i=t?[...e].reverse().findIndex((({char:e})=>{let r=e.parentElement,n=r.matches(t);return!(!o||!n)||n&&r.firstChild.isSameNode(e)})):-1;return i<0&&(i=o?0:e.length-1),i-r+(o?0:1)};let I=e=>new Promise((t=>{requestAnimationFrame((async()=>{t(await e())}))})),N=e=>null==e?void 0:e.getAnimations().find((t=>t.id===e.dataset.tiAnimationId)),D=({cursor:e,frames:t,options:r})=>{let n=e.animate(t,r);return n.pause(),n.id=e.dataset.tiAnimationId,I((()=>{I((()=>{n.play()}))})),n},L=e=>{var t;return null==(t=e.func)?void 0:t.call(null)},C=async({index:e,queueItems:t,wait:r,cursor:n,cursorOptions:o})=>{let i=t[e][1],a=[],s=e,l=i,u=()=>l&&!l.delay,c=i.shouldPauseCursor()&&o.autoPause;for(;u();)a.push(l),u()&&s++,l=t[s]?t[s][1]:null;if(a.length)return await I((async()=>{for(let e of a)await L(e)})),s-1;let d,f=N(n);return f&&(d=__spreadProps(__spreadValues({},f.effect.getComputedTiming()),{delay:c?o.autoPauseDelay:0})),await r((async()=>{f&&c&&f.cancel(),await I((()=>{L(i)}))}),i.delay),await(({cursor:e,options:t,cursorOptions:r})=>{if(!e||!r)return;let n,o=N(e);o&&(t.delay=o.effect.getComputedTiming().delay,n=o.currentTime,o.cancel());let i=D({cursor:e,frames:r.animation.frames,options:t});return n&&(i.currentTime=n),i})({cursor:n,options:d,cursorOptions:o}),e};const M=function(e,t={}){var r;let n=async(e,t,r=!1)=>{G.frozen&&await new Promise((e=>{this.unfreeze=()=>{G.frozen=!1,e()}})),r||await K.beforeStep(this),await((e,t,r)=>new Promise((n=>{r.push(setTimeout((async()=>{await e(),n()}),t||0))})))(e,t,U),r||await K.afterStep(this)},a=(e,t)=>C({index:e,queueItems:t,wait:n,cursor:te,cursorOptions:K.cursor}),I=e=>((e,t)=>{if(!e)return;let r=e.parentNode;(r.childNodes.length>1||r.isSameNode(t)?e:r).remove()})(e,Q),N=()=>_(Q),L=(e=0)=>function(e){let{speed:t,deleteSpeed:r,lifeLike:n}=e;return r=null!==r?r:t/3,n?[g(t,b(t)),g(r,b(r))]:[t,r]}(K)[e],M=()=>(e=>_(e)?i(e.value):f(e,!0).filter((e=>!(e.childNodes.length>0))))(Q),x=(e,t)=>(Z.add(e),((e={})=>{let t=e.delay;t&&Z.add({delay:t})})(t),this),A=()=>null!=X?X:W,j=(e={})=>[{func:()=>B(e)},{func:()=>B(K)}],R=e=>{let t=K.nextStringDelay;Z.add([{delay:t[0]},...e,{delay:t[1]}])},H=async()=>{if(!N()&&te&&Q.appendChild(te),ee){((e,t)=>{let r=`[data-typeit-id='${e}'] .ti-cursor`,n=getComputedStyle(t),o=Object.entries(T).reduce(((e,[t,r])=>`${e} ${t}: var(--ti-cursor-${t}, ${r||n[t]});`),"");h(`${r} { display: inline-block; width: 0; ${o} }`,e)})(Y,Q),te.dataset.tiAnimationId=Y;let{animation:e}=K.cursor,{frames:t,options:r}=e;D({frames:t,cursor:te,options:__spreadValues({duration:K.cursorSpeed},r)})}},k=()=>{let e=K.strings.filter((e=>!!e));e.forEach(((t,r)=>{if(this.type(t),r+1===e.length)return;let n=K.breakLines?[{func:()=>z(y("BR")),typeable:!0}]:S({func:$,delay:L(1)},Z.getTypeable().length);R(n)}))},F=async(e=!0)=>{G.started=!0;let t=t=>{Z.done(t,!e)};try{let r=[...Z.getQueue()];for(let e=0;e<r.length;e++){let[n,o]=r[e];if(!o.done){if(!o.deletable||o.deletable&&M().length){let n=await a(e,r);Array(n-e).fill(e+1).map(((e,t)=>e+t)).forEach((e=>{let[n]=r[e];t(n)})),e=n}t(n)}}if(!e)return this;if(G.completed=!0,await K.afterComplete(this),!K.loop)throw"";let o=K.loopDelay;n((async()=>{await(async e=>{let t=A();t&&await q({value:t});let r=M().map((e=>[Symbol(),{func:$,delay:L(1),deletable:!0,shouldPauseCursor:()=>!0}]));for(let n=0;n<r.length;n++)await a(n,r);Z.reset(),Z.set(0,{delay:e})})(o[0]),F()}),o[1])}catch(r){}return this},q=async e=>{var t,r,n;t=e,r=W,n=M(),W=Math.min(Math.max(r+t,0),n.length),((e,t,r)=>{let n=t[r-1],o=P(".ti-cursor",e);(e=(null==n?void 0:n.parentNode)||e).insertBefore(o,n||null)})(Q,M(),W)},z=e=>((e,t)=>{if(_(e))return void(e.value=`${e.value}${t.textContent}`);t.innerHTML="";let r=(n=t.originalParent,/body/i.test(null==n?void 0:n.tagName)?e:t.originalParent||e);var n;r.insertBefore(t,P(".ti-cursor",r)||null)})(Q,e),B=async e=>K=O(K,e),V=async()=>{N()?Q.value="":M().forEach(I)},$=()=>{let e=M();e.length&&(N()?Q.value=Q.value.slice(0,-1):I(e[W]))};this.break=function(e){return x({func:()=>z(y("BR")),typeable:!0},e)},this.delete=function(e=null,t={}){e=v(e);let r=j(t),n=e,{instant:o,to:i}=t,a=Z.getTypeable(),s=null===n?a.length:w(n)?n:E({queueItems:a,selector:n,cursorPosition:A(),to:i});return x([r[0],...S({func:$,delay:o?0:L(1),deletable:!0},s),r[1]],t)},this.empty=function(e={}){return x({func:V},e)},this.exec=function(e,t={}){let r=j(t);return x([r[0],{func:()=>e(this)},r[1]],t)},this.move=function(e,t={}){e=v(e);let r=j(t),{instant:n,to:o}=t,i=E({queueItems:Z.getTypeable(),selector:null===e?"":e,to:o,cursorPosition:A()}),a=i<0?-1:1;return X=A()+i,x([r[0],...S({func:()=>q(a),delay:n?0:L(),cursorable:!0},Math.abs(i)),r[1]],t)},this.options=function(e,t={}){return e=v(e),B(e),x({},t)},this.pause=function(e,t={}){return x({delay:v(e)},t)},this.type=function(e,t={}){e=v(e);let{instant:r}=t,n=j(t),o=p(e,K.html).map((e=>{return{func:()=>z(e),char:e,delay:r||(t=e,/<(.+)>(.*?)<\/(.+)>/.test(t.outerHTML))?0:L(),typeable:e.nodeType===Node.TEXT_NODE};var t})),i=[n[0],{func:async()=>await K.beforeString(e,this)},...o,{func:async()=>await K.afterString(e,this)},n[1]];return x(i,t)},this.is=function(e){return G[e]},this.destroy=function(e=!0){U.forEach(clearTimeout),U=[],v(e)&&te&&I(te),G.destroyed=!0},this.freeze=function(){G.frozen=!0},this.unfreeze=()=>{},this.reset=function(e){!this.is("destroyed")&&this.destroy(),e?(Z.wipe(),e(this)):Z.reset(),W=0;for(let t in G)G[t]=!1;return Q[N()?"value":"innerHTML"]="",this},this.go=function(){return G.started?this:(H(),K.waitUntilVisible?(((e,t)=>{new IntersectionObserver(((r,n)=>{r.forEach((r=>{r.isIntersecting&&(t(),n.unobserve(e))}))}),{threshold:1}).observe(e)})(Q,F.bind(this)),this):(F(),this))},this.flush=function(e=(()=>{})){return H(),F(!1).then(e),this},this.getQueue=()=>Z,this.getOptions=()=>K,this.updateOptions=e=>B(e),this.getElement=()=>Q;let Q="string"==typeof(J=e)?P(J):J;var J;let U=[],W=0,X=null,G=O({},c);t.cursor=(e=>{var t,r,n;if("object"==typeof e){let o={},{frames:i,options:a}=d.cursor.animation;return o.animation=e.animation||{},o.animation.frames=(null==(t=e.animation)?void 0:t.frames)||i,o.animation.options=O(a,(null==(r=e.animation)?void 0:r.options)||{}),o.autoPause=null!=(n=e.autoPause)?n:d.cursor.autoPause,o.autoPauseDelay=e.autoPauseDelay||d.cursor.autoPauseDelay,o}return!0===e?d.cursor:e})(null!=(r=t.cursor)?r:d.cursor);let K=O(d,t);K=O(K,{html:!N()&&K.html,nextStringDelay:m(K.nextStringDelay),loopDelay:m(K.loopDelay)});let Y=Math.random().toString().substring(2,9),Z=function(e){let t=function(e){return o(e).forEach((e=>{var t;return i.set(Symbol(null==(t=e.char)?void 0:t.innerText),r(__spreadValues({},e)))})),this},r=e=>(e.shouldPauseCursor=function(){return Boolean(this.typeable||this.cursorable||this.deletable)},e),n=()=>Array.from(i.values()),i=new Map;return t(e),{add:t,set:function(e,t){let n=[...i.keys()];i.set(n[e],r(t))},wipe:function(){i=new Map,t(e)},reset:function(){i.forEach((e=>delete e.done))},destroy:e=>i.delete(e),done:(e,t=!1)=>t?i.delete(e):i.get(e).done=!0,getItems:(e=!1)=>e?n():n().filter((e=>!e.done)),getQueue:()=>i,getTypeable:()=>n().filter((e=>e.typeable))}}([{delay:K.startDelay}]);Q.dataset.typeitId=Y,h("[data-typeit-id]:before {content: '.'; display: inline-block; width: 0; visibility: hidden;}");let ee=!!K.cursor&&!N(),te=(()=>{if(N())return;let e=y("span");return e.className=u,ee?(e.innerHTML=l(K.cursorChar).innerHTML,e):(e.style.visibility="hidden",e)})();K.strings=(e=>{let t=Q.innerHTML;return t?(Q.innerHTML="",K.startDelete?(Q.innerHTML=t,s(Q),R(S({func:$,delay:L(1),deletable:!0},M().length)),e):t.replace(/<!--(.+?)-->/g,"").trim().split(/<br(?:\s*?)(?:\/)?>/).concat(e)):e})(o(K.strings)),K.strings.length&&k()},{useRef:x,useEffect:A,useState:j}=r,R=e=>{const t=x(null),n=x(null),o=e,{options:i,as:a,children:s,getBeforeInit:l,getAfterInit:u}=o,c=__objRest(o,["options","as","children","getBeforeInit","getAfterInit"]),[d,f]=j(!0),[p,y]=j(null),h=a;return A((()=>{!function(){const e=Object.assign({},i);s&&t.current&&(e.strings=t.current.innerHTML),y(e)}(),f(!1)}),[i]),A((()=>{var e;p&&((null==(e=n.current)?void 0:e.updateOptions(p))||(n.current=new M(t.current,p),n.current=l(n.current),n.current.go(),n.current=u(n.current)))}),[p]),A((()=>()=>{var e;return null==(e=n.current)?void 0:e.destroy()}),[]),r.createElement(h,__spreadValues({ref:t,children:d?s:null,style:{opacity:d?0:1}},c))};return R.defaultProps={as:"span",options:{},getBeforeInit:e=>e,getAfterInit:e=>e},R}));
